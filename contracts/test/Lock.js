const {
  time,
  loadFixture,
} = require("@nomicfoundation/hardhat-network-helpers");
const { anyValue } = require("@nomicfoundation/hardhat-chai-matchers/withArgs");
const { expect } = require("chai");
const { ethers } = require("hardhat");
const { isCallTrace } = require("hardhat/internal/hardhat-network/stack-traces/message-trace");

describe("Testing MySwap Contract",()=>{
  let mySimpleFlashLoanV3Factory, mySimpleFlashLoanV3;
  beforeEach(async() =>{
    const aaveMainnetPoolAddressProvider = '0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb';
// // const aaveGoreliFaucet = '0x1ca525Cd5Cb77DB5Fa9cBbA02A0824e283469DBe';
console.log("deploying....");
    mySimpleFlashLoanV3Factory = await ethers.getContractFactory("MySimpleFlashLoanV3");
    mySimpleFlashLoanV3 = await mySimpleFlashLoanV3Factory.deploy(aaveMainnetPoolAddressProvider);
    // mySimpleFlashLoanV3 = await mySimpleFlashLoanV3.deployed();
  })
  it("calling executeFlashLoan()",async () =>{
    const assetContract ='0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174';
    const amount = 1000000;
    const buyToken ='0x8f3cf7ad23cd3cadbd9735aff958023239c6a063';
    const allowanceTarget ='0xdef1c0ded9bec7f1a1670819833240f027b25eff';
    const to = '0xdef1c0ded9bec7f1a1670819833240f027b25eff';
    const data = '0x415565b00000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a063000000000000000000000000000000000000000000000000016345785d8a00000000000000000000000000000000000000000000001765563ec115bd1e31722600000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000001820000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000001780000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a06300000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000001740000000000000000000000000000000000000000000000000000000000000174000000000000000000000000000000000000000000000000000000000000015a0000000000000000000000000000000000000000000000000016345785d8a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000440000000000000000000000000000000000000000000000000000000000000058000000000000000000000000000000000000000000000000000000000000006e0000000000000000000000000000000000000000000000000000000000000084000000000000000000000000000000000000000000000000000000000000009a00000000000000000000000000000000000000000000000000000000000000ac00000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e6000000000000000000000000000000000000000000000000000000000000010c000000000000000000000000000000000000000000000000000000000000011e000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000253757368695377617000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed00000000000000000000000000000000000000000000630467769a35a0e04f44000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000001b02da8cb0d097eb8d57a175b88c7d8b47997506000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a0630000000000000000000000000000000253757368695377617000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed00000000000000000000000000000000000000000000519ff9ca2256b9708c90000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000001b02da8cb0d097eb8d57a175b88c7d8b47997506000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a06300000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed00000000000000000000000000000000000000000002c0f4e583424d0c2318e0000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a06300000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed00000000000000000000000000000000000000000000179990d32c08079e2ccc000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a06300000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed00000000000000000000000000000000000000000002421c8850681909c22c45000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a06300000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed000000000000000000000000000000000000000000001390e79cd8aeb3f8db32000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa84174000000000000000000000000c2132d05d31c914a87c6611c10748aeb04b58e8f0000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a0630000000000000000000000000000000143757276650000000000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed0000000000000000000000000000000000000000000d1bbecb6f84170142d18500000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080000000000000000000000000445fe580ef8d70ff569ab36e80c647af338db351a6417ed600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000241706553776170000000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed00000000000000000000000000000000000000000000bd53a49e07c5ace0158b000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000c0788a3ad43d79aa53b09c2eacc313a787d1d607000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a0630000000000000000000000000000001942616c616e6365725632000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed00000000000000000000000000000000000000000000d7dfbb7067c09b8f8a62000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000ba12222222228d8ba445958a75a0704d566bf2c8000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002006df3b2bbb68adc8b0e302443692037ed9f91b4200000000000000000000001200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a0630000000000000000000000000000001942616c616e6365725632000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed000000000000000000000000000000000000000000000e4af782ab9765e34d69000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000ba12222222228d8ba445958a75a0704d566bf2c800000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200d34e5dd4d8f043557145598e4e2dc286b35fd4f00000000000000000000006800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a0630000000000000000000000000000000f49726f6e537761700000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed0000000000000000000000000000000000000000000036c94371aa3a8c6f02b000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080000000000000000000000000837503e8a8753ae17fb8c8151b8e6f586defcb579169558600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000f53796e61707365000000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed000000000000000000000000000000000000000000027dd6ab91a23772600ca20000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000008000000000000000000000000085fcd7dd0a1e1a9fcd5fd886ed522de8221c3ee5916955860000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000024d657368537761700000000000000000000000000000000000000000000000000000000000000000001b541cf380c4ed000000000000000000000000000000000000000000000e98e538be6d48ce22dd000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000010f4a785f458bc144e3706575924889954946639000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a063000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa84174000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd00000000000000000000000010000000000000000000000000000000000000110000000000000000000000000000000000000000000000b6aadfcebc63077ad8'
    const response = await mySimpleFlashLoanV3.executeFlashLoan(assetContract,amount,assetContract,buyToken,allowanceTarget,to,data);
  })
})